{% set name = "FreeFem" %}
{% set version = "4.13" %}
{% set sha256 = "d296adc42c6b0cc5f148c44b00bea15939d6c0dbe391613dea8a0693c2c0e3b7" %}
{% set build = 0 %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/{{ name }}/{{ name }}-sources/archive/refs/tags/v{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: {{ build }}
  skip: true  # [py2k or osx or win]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - autoconf
    - automake
    - bison
    - flex
    - m4
    - make
    - patch
    - unzip
  host:
    - arpack
    - gmm
    - hdf5
    - libopenblas
    - suitesparse
    - superlu
    - tetgen

test:
  commands:
    - test -f $PREFIX/bin/FreeFem++  # [unix]
    - test -f $PREFIX/bin/FreeFem++-nw  # [unix]
    - test -f $PREFIX/bin/ff-c++  # [unix]
    - test -f $PREFIX/bin/ff-get-dep  # [unix]
    - test -f $PREFIX/bin/ff-pkg-download  # [unix]
    - FreeFem++ $PREFIX/share/FreeFEM/${PKG_VERSION}/examples/tutorial/beam.edp  # [unix]

about:
  home: https://freefem.org/
  license: LGPL-3.0-only
  license_family: LGPL
  license_file: LICENSE.txt
  summary: 'FreeFem : A high level multiphysics finite element software'
  description: >
    FreeFEM is a popular 2D and 3D partial differential equations (PDE) solver used by thousands of researchers across the world. It allows you to easily implement your own physics modules using the provided FreeFEM language. FreeFEM offers a large list of finite elements, like the Lagrange, Taylor-Hood, etc., usable in
    the continuous and discontinuous Galerkin method framework.
  doc_url: https://doc.freefem.org
  dev_url: https://github.com/FreeFem

extra:
  recipe-maintainers:
    - ldallolio
    - cnrdn
    - fbordeu
